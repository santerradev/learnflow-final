<%- include('../partials/header_auth', { pageTitle: 'Login', formWidth: 'max-w-md' }) %>

    <h2 class="text-2xl font-bold text-center text-gray-900 dark:text-white mb-2">Entrar na sua conta</h2>
    <p class="text-center text-gray-600 dark:text-gray-400 mb-6">Acesse sua plataforma de ensino</p>

    <!-- Mensagem de ERRO (só aparece se existir) -->
    <% if (typeof error !== 'undefined' && error && error.length > 0) { %>
        <div class="bg-red-50 border border-red-200 text-red-700 dark:bg-red-900/20 dark:border-red-800 dark:text-red-400 px-4 py-3 rounded-lg mb-4 flex items-start" role="alert">
            <i class="fas fa-exclamation-circle mr-3 mt-0.5 flex-shrink-0"></i>
            <span class="text-sm"><%= error %></span>
        </div>
    <% } %>
    
    <!-- Mensagem de SUCESSO (só aparece se existir) -->
    <% if (typeof success !== 'undefined' && success && success.length > 0) { %>
        <div class="bg-green-50 border border-green-200 text-green-700 dark:bg-green-900/20 dark:border-green-800 dark:text-green-400 px-4 py-3 rounded-lg mb-4 flex items-start" role="alert">
            <i class="fas fa-check-circle mr-3 mt-0.5 flex-shrink-0"></i>
            <span class="text-sm"><%= success %></span>
        </div>
    <% } %>
    
    <form class="space-y-5" action="/auth/login" method="POST">
        <!-- Email -->
        <div>
            <label for="email" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Email</label>
            <div class="relative">
                <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                    <i class="fas fa-user text-gray-400"></i>
                </div>
                <input id="email" 
                       name="email" 
                       type="email" 
                       autocomplete="email" 
                       required 
                       placeholder="seu@email.com"
                       class="block w-full pl-10 pr-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg shadow-sm placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-teal-500 dark:bg-gray-700 dark:text-white transition">
            </div>
        </div>
        
        <!-- Senha -->
        <div>
            <label for="senha" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Senha</label>
            <div class="relative">
                <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                    <i class="fas fa-lock text-gray-400"></i>
                </div>
                <input id="senha" 
                       name="senha" 
                       type="password" 
                       autocomplete="current-password" 
                       required 
                       placeholder="Sua senha"
                       class="block w-full pl-10 pr-12 py-3 border border-gray-300 dark:border-gray-600 rounded-lg shadow-sm placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-teal-500 dark:bg-gray-700 dark:text-white transition">
                <div class="absolute inset-y-0 right-0 pr-3 flex items-center cursor-pointer" onclick="togglePassword('senha')">
                    <i id="senha-icon" class="fas fa-eye text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition"></i>
                </div>
            </div>
        </div>
        
        <!-- Lembrar-me e Esqueci senha -->
        <div class="flex items-center justify-between">
            <div class="flex items-center">
                <input id="remember" 
                       name="remember" 
                       type="checkbox" 
                       class="h-4 w-4 text-teal-600 focus:ring-teal-500 border-gray-300 rounded cursor-pointer">
                <label for="remember" class="ml-2 block text-sm text-gray-700 dark:text-gray-300 cursor-pointer">
                    Lembrar-me
                </label>
            </div>
            <a href="/auth/esqueci-senha" class="text-sm text-teal-600 hover:text-teal-500 dark:text-teal-400 dark:hover:text-teal-300 transition">
                Esqueci minha senha
            </a>
        </div>
        
        <!-- Botão Entrar -->
        <div>
            <button type="submit" 
                    class="w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-teal-600 hover:bg-teal-700 dark:bg-teal-500 dark:hover:bg-teal-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500 transition duration-150 ease-in-out transform hover:scale-[1.01] active:scale-[0.99]">
                Entrar
            </button>
        </div>
    </form>
    
    <!-- Link para Cadastro -->
    <p class="mt-6 text-center text-sm text-gray-600 dark:text-gray-400">
        Não tem uma conta?
        <a href="/auth/cadastro" class="font-medium text-teal-600 hover:text-teal-500 dark:text-teal-400 dark:hover:text-teal-300 transition">
            Cadastre-se
        </a>
    </p>

    <script>
        function togglePassword(fieldId) {
            const field = document.getElementById(fieldId);
            const icon = document.getElementById(fieldId + '-icon');
            
            if (field.type === 'password') {
                field.type = 'text';
                icon.classList.remove('fa-eye');
                icon.classList.add('fa-eye-slash');
            } else {
                field.type = 'password';
                icon.classList.remove('fa-eye-slash');
                icon.classList.add('fa-eye');
            }
        }

        // Auto-ocultar mensagens após 5 segundos
        document.addEventListener('DOMContentLoaded', function() {
            const alerts = document.querySelectorAll('[role="alert"]');
            alerts.forEach(alert => {
                setTimeout(() => {
                    alert.style.transition = 'opacity 0.5s ease-out';
                    alert.style.opacity = '0';
                    setTimeout(() => alert.remove(), 500);
                }, 5000);
            });
        });
    </script>

<%- include('../partials/footer_auth') %>